<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

    <!-- View-transition -->
    <style>
        /* @view-transition {navigation: auto;} */
        @keyframes move-out-right {
            from { transform: translateX(0%) scale(1); opacity: 1; box-shadow: none; }
            to { transform: translateX(100%) scale(0.95); opacity: 0.8; box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1); }
        }
        @keyframes move-in-left {
            from { transform: translateX(-100%) scale(0.95); opacity: 0.8; box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1); }
            to { transform: translateX(0%) scale(1); opacity: 1; box-shadow: none; }
        }        
        ::view-transition-old(root) {animation: 0.6s cubic-bezier(0.4, 0, 0.2, 1) both move-out-right;}
        ::view-transition-new(root) {animation: 0.6s cubic-bezier(0.4, 0, 0.2, 1) both move-in-left;}        
    </style>

    <!-- Icon -->
    <link rel="icon" href="/pwa/favicon.ico" sizes="any">
    <link rel="apple-touch-icon" href="/pwa/apple-touch-icon.png">

    <!-- PWA -->
    <link rel="manifest" href="/pwa/manifest.json">
    <script src="/pwa/pwa.js"></script>

    <!-- SimpleBar JS -->
    <link href="/assets/lib/simplebar/simplebar.min.css" rel="stylesheet" />
    <script src="/assets/lib/simplebar/simplebar.min.js"></script>    

    <link href="/assets/lib/materializecss/materialize.custom.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/style.common.min.css" rel="stylesheet" />    
    <link href="/css/style.css" rel="stylesheet" type="text/css" />
    
    <title>날마다성경</title>
</head>
<body>

    <!-- 인트로 팝업 -->
    <aside id="popup-intro" class="container popup">
        <header>
            <img src="/images/img_bible.png" alt="">
            <h1>날마다성경</h1>
        </header>
        <main>
            <p>"주의 말씀은 내 발에 등이요 내 길에 빛이니이다.“<br />- 시편 119:105 -</p>
        </main>
        <footer>
            <button class="btn" onclick="OpenPlanPopup()">성경 통독 계획 세우기</button>
            <small>매일 한 걸음씩 "<strong>날마다성경</strong>"과 함께 끝까지 통독하세요!</small>
        </footer>
    </aside>

    <!-- 계획표 설정 팝업 -->
    <aside id="popup-plan" class="container popup">
        <header>
            <h4><span id="stepCount">1</span>/<small>3 단계</small></h4>
            <a href="javascript:;" class="btn-round" onclick="ClosePopup(this)" title="닫기">✕</a>
        </header>
        <main class="simplebar">
            <!-- 읽기 방식 선택 -->
            <article class="step s1">
                <h4>읽기 방식 선택</h4>
                <ul>
                    <li><label><h5>성경 순서로 읽기 <p>성경의 책 순서에 따라 읽는 방식</p></h5><input type="radio" name="chk1" value="01"></label></li>
                    <li><label><h5>역사 순서로 읽기 <p>성경의 사건이 발생한 순서에 따라 읽는 방식</p></h5><input type="radio" name="chk1" value="02"></label></li>
                    <li><label><h5>테마 순서로 읽기 <p>예수님의 생애, 지혜서 등 특정 테마에 집중하여 읽는 방식</p></h5><input type="radio" name="chk1" value="03"></label></li>
                    <li><label><h5>주제 순서로 읽기 <p>믿음, 사랑, 구원 등의 주제에 따라 관련된 구절을 모아 읽는 방식</p></h5><input type="radio" name="chk1" value="04"></label></li>
                    <li><label><h5>구약/신약 혼합해서 읽기 <p>1년 계획으로 오전(구약), 오후(신약)으로 읽는 방식</p></h5><input type="radio" name="chk1" value="05"></label></li>
                    <li><label><h5>내가 읽은 성경만 기록 <p>계획 없이 읽었던 성경 구절을 기록하는 방식</p></h5><input type="radio" name="chk1" value="00"></label></li>
                </ul>
            </article>
            
            <!-- 읽기 요일 선택 -->
            <article class="step s2 none">
                <h4>읽기 요일 선택</h4>
                <ul class="grid col-2">
                    <li><label><h5>월요일</h5><input type="checkbox" name="chk2" value="월" checked></label></li>
                    <li><label><h5>화요일</h5><input type="checkbox" name="chk2" value="화" checked></label></li>
                    <li><label><h5>수요일</h5><input type="checkbox" name="chk2" value="수" checked></label></li>
                    <li><label><h5>목요일</h5><input type="checkbox" name="chk2" value="목" checked></label></li>
                    <li><label><h5>금요일</h5><input type="checkbox" name="chk2" value="금" checked></label></li>
                    <li><label><h5>토요일</h5><input type="checkbox" name="chk2" value="토" checked></label></li>
                    <li><label><h5>일요일</h5><input type="checkbox" name="chk2" value="일" checked></label></li>
                </ul>
            </article>
            
            <!-- 읽기 기간 설정 -->
            <article class="step s3 none">
                <h4>읽기 기간 설정</h4>
                <ul>
                    <li><label><h5>3개월 <p>선택한 요일 기준 ➔ <span class="time-display"><strong>하루 평균 계산 중...</strong></span></p></h5><input type="radio" name="chk3" value="90"></label></li>
                    <li><label><h5>6개월 <p>선택한 요일 기준 ➔ <span class="time-display"><strong>하루 평균 계산 중...</strong></span></p></h5><input type="radio" name="chk3" value="180"></label></li>
                    <li><label><h5>1년 <p>선택한 요일 기준 ➔ <span class="time-display"><strong>하루 평균 계산 중...</strong></span></p></h5><input type="radio" name="chk3" value="360"></label></li>
                    <li><label><h5>1년 6개월 <p>선택한 요일 기준 ➔ <span class="time-display"><strong>하루 평균 계산 중...</strong></span></p></h5><input type="radio" name="chk3" value="540"></label></li>
                    <li><label><h5>2년 <p>선택한 요일 기준 ➔ <span class="time-display"><strong>하루 평균 계산 중...</strong></span></p></h5><input type="radio" name="chk3" value="720"></label></li>
                </ul>
            </article>            
        </main>
        <footer>
            <button id="prevStep" onclick="OnPrevPlanStep()">이전 단계</button>
            <button id="nextStep" class="active" onclick="OnNextPlanStep()">다음 단계</button>
            <button id="btnGenerate" class="active" style="display: none;" onclick="OnCreatePlan()">계획표 생성</button>
        </footer>
    </aside>

    <!-- 설정 슬라이드 -->
    <aside id="slide-settings" class="side-nav">
        <header>
            <a href="javascript:;" class="btn-round" onclick="CloseSettingPopup()" title="닫기">✕</a>
            
            <div class="info">
                <h5>계획표 기간 (1년간)</h5>
                <h3>23일 남음</h3>
                <h6>23.11.30 ~ 24.12.30</h6>
                <button class="btn" onclick="CloseSettingPopup();OpenPlanPopup()"><img src="/images/icon_refresh.png" alt=""> 계획표 다시설정</button>
            </div>
        </header>
        <main>
            <ul class="list">
                <li>
                    <label for="opt1" class="cursor"><h5>완료 표시 숨기기</h5></label>
                    <div class="switch sm">
                        <input type="checkbox" id="opt1">
                        <label for="opt1" class="lever"></label>
                    </div>
                </li>
                <li class="row">
                    <h5 class="col">글씨 크기</h5>
                    <div class="col btn-group">
                        <button class="active">보통</button>
                        <button>크게</button>
                    </div>
                </li>
            </ul>
            <ul class="list">
                <li class="cursor" onclick="OnOpenHelper()"><a href="javascript:;">도움말</a> <img src="/images/icon_help.png" alt=""></li>
            </ul>
        </main>
    </aside>

    <!-- 도움말 모달 -->
    <aside id="popup-help" class="modal">
        도움말 모달
    </aside>

    <!-- 메인 컨텐츠 -->
    <div class="container main">

        <header id="header" class="plan-progress-bar">
            <h4>날마다성경</h4>
            <a href="javascript:;" class="btn-icon settings" id="btn-settings" data-activates="slide-settings">Settings</a>
        </header>

        <main id="main">
            <!-- <div id="plan-list"></div> -->

            <div id="plan-list">
                <h4>창세기 </h4>
                <table>
                    <tr><td>월</td><td>24.08.12</td><td>창세기 1~5장</td><td><i>✔</i></td></tr>
                    <tr class="active"><td>화</td><td>24.08.13</td><td>창세기 6~10장</td><td><i>✔</i></tr>
                    <tr><td>수</td><td>24.08.14</td><td>미가 4~7, 나훔 1~3, 하박국 1~3, 스바냐 1~3, 학개 1</td><td><i>✔</i></tr>
                    <tr><td>목</td><td>24.08.15</td><td>빌립보서 4, 골로새서 1~4, 데살로니가전서 1~5, 데살로니가후서 1~3, 디모데전서 1</td><td><i>✔</i></tr>
                    <tr class="split"><td>금</td><td>24.08.16</td><td>빌립보서 2~4, 골로새서 1~4, 데살로니가전서 1~5, 데살로니가후서 1~3, 디모데전서 1~6, 디모데후서 1~4, 디도서 1~3, 빌레몬서 1, 히브리서 1~13, 야고보서 1~5, 베드로전서 1~5, 베드로후서 1~3, 요한1서 1~5, 요한2서 1, 요한3서 1, 유다서 1, 요한계시록 1~22</td><td><i>✔</i></tr>
                    <tr><td>토</td><td>24.08.17</td><td>창세기 26~30장</td><td><i>✔</i></tr>
                    <tr><td>일</td><td>24.08.18</td><td>창세기 31~35장</td><td><i>✔</i></tr>

                    <tr class="split"><td>월</td><td>24.08.19</td><td>창세기 36~40장</td><td><i>✔</i></tr>
                    <tr><td>화</td><td>24.08.20</td><td>창세기 41~45장</td><td><i>✔</i></tr>
                    <tr><td>수</td><td>24.08.21</td><td>창세기 46~50장</td><td><i>✔</i></tr>
                </table>

                <h4>출앱굽기 </h4>
                <table>
                    <tr><td>월</td><td>24.08.12</td><td>창세기 1~5장</td><td><i>✔</i></td></tr>
                    <tr class="active"><td>화</td><td>24.08.13</td><td>창세기 6~10장</td><td><i>✔</i></tr>
                    <tr><td>수</td><td>24.08.14</td><td>창세기 11~15장</td><td><i>✔</i></tr>
                    <tr><td>목</td><td>24.08.15</td><td>창세기 16~20장</td><td><i>✔</i></tr>
                    <tr><td>금</td><td>24.08.16</td><td>창세기 21~25장</td><td><i>✔</i></tr>
                    <tr><td>토</td><td>24.08.17</td><td>창세기 26~30장</td><td><i>✔</i></tr>
                    <tr><td>일</td><td>24.08.18</td><td>창세기 31~35장</td><td><i>✔</i></tr>

                    <tr class="split"><td>월</td><td>24.08.19</td><td>창세기 36~40장</td><td><i>✔</i></tr>
                    <tr><td>화</td><td>24.08.20</td><td>창세기 41~45장</td><td><i>✔</i></tr>
                    <tr><td>수</td><td>24.08.21</td><td>창세기 46~50장</td><td><i>✔</i></tr>
                </table>
            </div>             
        </main>

        <footer id="footer">
            <a class="active" href="javascript:;">계획표</a>
            <a href="/bible">성경</a>
        </footer>
        
    </div>

    <script src="/assets/lib/jquery/jquery.min-3.7.1.js"></script>
    <script src="/assets/lib/materializecss/materialize.min.js"></script>
    <script src="/assets/js/utils.js"></script>
    <script src="/assets/js/extend.anim.js"></script>
    <script src="/assets/lib/canvas-confetti/confetti.browser.min.js"></script>
    <script src="/js/site.js"></script>
    <script src="/js/site.db.js"></script>
    <script src="/js/site.plan.js"></script>

    <script>
        $(function() {            
            //체크리스트 테이블 행 클릭시 active 토글
            $(document).on("click", "#plan-list table tr", function () {
                $(this).toggleClass("active");
            });

                //체크리스트 테이블 행 전체 선택/해제
            $(document).on("click", "#plan-list .btn", function () {
                const table = $(this).closest('h4').next('table');
                const rows = table.find('tr');
                const allActive = rows.hasClass('active');

                $(rows).each(function (index, item) {
                    const date = $(item).data('date');
                    //TODO:작업필요
                    //toggleCompletion(date); // 클릭한 항목의 완료 상태를 변경
                });
                

                if (allActive) {
                    // 모든 행에 'active' 해제 및 체크 표시 제거
                    rows.removeClass('active');
                } else {
                    // 모든 행에 'active' 적용 및 체크 표시 추가
                    rows.addClass('active');
                }
            });
        });
    </script>
    
</body>
</html>